/* groovylint-disable CompileStatic */
pipeline {
    agent { node { label 'padrao' } }
  stages {
      stage('build and push dispatch') {
        steps{
                sh '''
                    pwd
                    cd dispatch
                    docker build -t hpjrvs/dispatch .
                    docker push hpjrvs/dispatch'''
        }
      }
      stage('build and push mongodb') {
        steps{
                sh '''
                    pwd
                    cd ..
                    cd mongo
                    docker build -t hpjrvs/mongodb .
                    docker push hpjrvs/mongodb'''
        }
      }
      stage('build and push cart') {
        steps{
                sh '''
                    pwd
                    cd ..
                    cd cart
                    docker build -t hpjrvs/cart .
                    docker push hpjrvs/cart'''
        }
      }
      stage('build and push catalogue') {
        steps{
                sh '''
                    pwd
                    cd ..
                    cd catalogue
                    docker build -t hpjrvs/catalogue .
                    docker push hpjrvs/catalogue'''
        }
      }
    }
  }