/* groovylint-disable CompileStatic */
pipeline {
    agent { node { label 'padrao' } }
  stages {
      stage('build and push dispatch') {
        steps{
                sh '''
                    cd dispatch
                    docker build -t hpjrvs/dispatch .
                    docker push hpjrvs/dispatch'''
        }
      }
      stage('build and push mongodb') {
        steps{
                sh '''
                    cd mongo
                    docker build -t hpjrvs/mongodb .
                    docker push hpjrvs/mongodb'''
        }
      }
      stage('build and push fluentd') {
        steps{
                //sh '''
                //    cd fluentd
                //    docker build -t hpjrvs/fluentd .
                //    docker push hpjrvs/fluentd'''
        }
      }
      stage('build and push mysql') {
        steps{
                sh '''
                    cd mysql
                    docker build -t hpjrvs/mysql .
                    docker push hpjrvs/mysql'''
        }
      }
      stage('build and push cart') {
        steps{
                sh '''
                    cd cart
                    docker build -t hpjrvs/cart .
                    docker push hpjrvs/cart'''
        }
      }
      stage('build and push catalogue') {
        steps{
                sh '''
                    cd catalogue
                    docker build -t hpjrvs/catalogue .
                    docker push hpjrvs/catalogue'''
        }
      }
      stage('build and push payment') {
        steps{
                sh '''
                    cd payment
                    docker build -t hpjrvs/payment .
                    docker push hpjrvs/payment'''
        }
      }
    }
  }