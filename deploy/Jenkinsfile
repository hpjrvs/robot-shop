/* groovylint-disable CompileStatic */
pipeline {
    agent { node { label 'padrao' } }
  stages {
      stage('build and push dispatch') {
        steps{
                sh '''
                    cd dispatch
                    docker build -t hpjrvs/dispatch .
                    docker push hpjrvs/dispatch'''
        }
      }
      stage('build and push mongodb') {
        steps{
                sh '''
                    cd mongo
                    docker build -t hpjrvs/mongodb .
                    docker push hpjrvs/mongodb'''
        }
      }
      //stage('build and push fluentd') {
      //  steps{
                //sh '''
                //    cd fluentd
                //    docker build -t hpjrvs/fluentd .
                //    docker push hpjrvs/fluentd'''
      //  }
     // }
      stage('build and push mysql') {
        steps{
                sh '''
                    cd mysql
                    docker build -t hpjrvs/mysql .
                    docker push hpjrvs/mysql'''
        }
      }
      stage('build and push cart') {
        steps{
                sh '''
                    cd cart
                    docker build -t hpjrvs/cart .
                    docker push hpjrvs/cart'''
        }
      }
      stage('build and push catalogue') {
        steps{
                sh '''
                    cd catalogue
                    docker build -t hpjrvs/catalogue .
                    docker push hpjrvs/catalogue'''
        }
      }
      stage('build and push payment') {
        steps{
                sh '''
                    cd payment
                    docker build -t hpjrvs/payment .
                    docker push hpjrvs/payment'''
        }
      }
      stage('build and push ratings') {
        steps{
                sh '''
                    cd payment
                    docker build -t hpjrvs/ratings .
                    docker push hpjrvs/ratings'''
        }
      }
      stage('build and push shipping') {
        steps{
                sh '''
                    cd payment
                    docker build -t hpjrvs/shipping .
                    docker push hpjrvs/shipping'''
        }
      }
      stage('build and push user') {
        steps{
                sh '''
                    cd user
                    docker build -t hpjrvs/user .
                    docker push hpjrvs/user'''
        }
      }
      stage('build and push web') {
        steps{
                sh '''
                    cd user
                    docker build -t hpjrvs/web .
                    docker push hpjrvs/web'''
        }
      }
    }
  }